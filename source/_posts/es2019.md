---
title: Javascript ES2019中的8个新特性
categories: 前端
tag:
  - js
abbrlink: a77f99b9
date: 2019-02-19 09:08:20
photos: https://ws2.sinaimg.cn/large/0079V2lRgy1g0bia4xglzj30z80jstop.jpg
cover: https://qiniu.chenyeah.com/img/20190807115557.jpg
---

## 前言

JavaScript 不断改进和添加更多功能。TC39 已经完成并批准了 ES2019 的这 8 个功能，它有 4 个阶段，这些阶段是：

- **Stage 0**: Strawman
- **Stage 1**: Proposals
- **Stage 2**: Drafts
- **Stage 3**: Candidates
- **Stage 4**: Finished/Approved

以下链接可以查看[Stage 0](https://github.com/tc39/proposals/blob/master/stage-0-proposals.md)，[Stage 1 – 3](https://github.com/tc39/proposals) 和[Final Stage](https://github.com/tc39/proposals/blob/master/finished-proposals.md)

## 可选的 Catch 绑定

能够在不使用 catch 绑定的地方选择性地删除它

```js
try {
  // trying to use a new ES2019 feature
  // which may not be implemented in other browsers
} catch (unused) {
  // revert back to old way
}
```

现在可以删除未使用的绑定

```js
try {
  ...
} catch {
  ...
}
```

## JSON 超集

此提议的动机是 JSON 字符串可以包含未转义的 U + 2028 LINE SEPARATOR 和 U + 2029 PARAGRAPH SEPARATOR 字符，而 ECMAScript 字符串则不能。在 ES2019 之前，它会产生错误`SyntaxError: Invalid or unexpected token`

```js
const LS = eval('"\u2028"');
const PS = eval("'\u2029'");
```

## 符号说明

在 ES2015 中引入符号，具有非常独特的功能。在 ES2019 中，它现在可以提供给定的描述。其目的是避免间接获得所提供的描述`Symbol.prototype.toString`

```js
const mySymbol = Symbol("myDescription");

console.log(mySymbol); // Symbol(myDescription)

console.log(mySymbol.toString()); // Symbol(myDescription)

console.log(mySymbol.description); // myDescription
```

## Function.prototype.toString - 修订版

我们之前已经在函数原型中使用了`toString`方法，但是在 ES2019 中它已被修改并包含函数内的注释，请注意它在`Arrow Functions`上不起作用。

```js
function /* comment */ foo /* another comment */() {}

// Before
console.log(foo.toString()); // function foo(){}

// Now ES2019
console.log(foo.toString()); // function /* comment */ foo /* another comment */ (){}

// Arrow Syntax
const bar /* comment */ = /* another comment */ () => {};

console.log(bar.toString()); // () => {}
```

## Object.fromEntries

它是 Object.entries 的反向方法，它也是克隆对象的方法之一

```js
const obj = {
  prop1: 1,
  prop2: 2
};

const entries = Object.entries(obj);

console.log(entries); // [ [ 'prop1', 1 ], [ 'prop2', 2 ] ]

const fromEntries = Object.fromEntries(entries);

console.log(fromEntries); // Object { prop1: 1, prop2: 2 }

console.log(obj === fromEntries); // false
```

注意：任何嵌入式对象/数组都只是通过引用复制。

## 格式良好的 JSON.stringify

这也是由同一个人提出的，并且与 JSON 超集特征有关 。ES2019 不是将未配对的代理代码点作为单个 UTF-16 代码单元返回，而是用 JSON 转义序列表示它们

```js
// Before
console.log(JSON.stringify("\uD800")); // "�"

// Now ES2019
console.log(JSON.stringify("\uD800")); // "\ud800"
```

## String.prototype trimStart 和 trimEnd

我们已经在 String 原型中使用了`trim`方法，它删除了字符串开头和结尾之间的空格。但是现在开始介绍 ES2019 的 `trimStart`和`trimEnd`

```js
// Trim
const name = "   Codedam ";
console.log(name.trim()); // "Codedam"

// Trim Start
const description = "   Unlocks Secret Codes ";
console.log(description.trimStart()); // "Unlocks Secret Codes "

// Trim End
const category = "  JavaScript ";
console.log(category.trimEnd()); // "  JavaScript"
```

## Array.prototype flat 和 flatMap

`flat`方法创建一个新数组，所有子数组元素以递归方式连接到指定的深度。 默认情况下，深度为 1，使数组上第一层嵌套数组变平。

```js
const arr = [1, 2, [3, 4, [5, 6]]];
arr.flat(); // [1, 2, 3, 4, [5, 6]]
arr.flat(2); // [1, 2, 3, 4, 5, 6]

// You can use Infinity to flatten all the nested arrays no matter how deep the array is

const arrExtreme = [1, [2, [3, [4, [5, 6, 7, [8, 9]]]]]];
arrExtreme.flat(Infinity); // [1, 2, 3, 4, 5, 6, 7, 8, 9]
```

`flatMap` 类似于 flat 并且与 map 相关，其中它映射数组然后将其展平

```js
const arr = ["Codedam", "is Awsome", "!"];

const mapResult = arr.map(item => item.split(" "));
console.log(mapResult); // [ [ 'Codedam' ], [ 'is', 'Awsome' ], [ '!' ] ]

const flatMapResult = arr.flatMap(chunk => chunk.split(" "));
console.log(flatMapResult); // ['Codedam', 'is',  'Awsome', '!'];
```

## 其他

> 强调一下现在 **Stage 3** 中的一些有用的即将推出的功能。

- [globalThis](https://github.com/tc39/proposal-global)
- [BigInt](https://github.com/tc39/proposal-bigint)
- [import()](https://github.com/tc39/proposal-dynamic-import)
- [Legacy RegEx](https://github.com/tc39/proposal-regexp-legacy-features)
- [Private instance methods and accessors](https://github.com/tc39/proposal-private-methods)
- [String.prototype.matchAll](https://github.com/tc39/String.prototype.matchAll)

## 最后

原文：[8 NEW FEATURES in JavaScript ES2019](https://codedam.com/8-new-features-javascript-es2019/)
作者：[Rienz](https://codedam.com/author/admin/)
